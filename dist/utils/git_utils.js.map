{"version":3,"sources":["../../src/utils/git_utils.js"],"names":[],"mappings":";;;;;;;;sBAAc,QAAQ;;;;6BACG,eAAe;;;AAGjC,IAAM,qBAAqB,GAAG,SAAxB,qBAAqB;MAAI,MAAM,yDAAG,EAAE;SAC/C,MAAM,CAAC,6BAAS,2BAA2B,CAAC,CAAC,GAAG,MAAM;CACvD,CAAC;;;AAEK,IAAM,aAAa,GAAG,SAAhB,aAAa;SACxB,oBAAE,IAAI,CAAC,6BAAS,gCAAgC,CAAC,CAAC;CACnD,CAAC;;;AAEK,IAAM,qBAAqB,GAAG,SAAxB,qBAAqB,CAAG,aAAa;SAChD,aAAa,CAAC,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC;CAC/B,CAAC;;;AAEK,IAAM,iBAAiB,GAAG,SAApB,iBAAiB,GAAS;AACrC,MAAM,KAAK,GAAG,aAAa,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;AACzC,MAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;AACtB,WAAO,qBAAqB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;GACxC;AACD,SAAO,qBAAqB,CAAC,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;CACvD,CAAC;;;AAEK,IAAM,iBAAiB,GAAG,SAApB,iBAAiB;SAAY,iBAAiB,EAAE,SAAI,qBAAqB,EAAE;CAAE,CAAC;;;AAEpF,IAAM,oBAAoB,GAAG,SAAvB,oBAAoB,CAAG,GAAG;SAAO,GAAG,SAAI,iBAAiB,EAAE;CAAE,CAAC","file":"git_utils.js","sourcesContent":["import _ from 'lodash';\nimport { execSync } from 'child_process';\n\n// we always multiply by 10 so that you can manipulate it a bit\nexport const getBuildNumberFromGit = (factor = 10) => (\n  Number(execSync('git rev-list --count HEAD')) * factor\n);\n\nexport const getTagFromGit = () => (\n  _.trim(execSync('git describe --tags --abbrev=0'))\n);\n\nexport const sanitizeVersionString = versionString => (\n  versionString.replace('v', '')\n);\n\nexport const getVersionFromTag = () => {\n  const parts = getTagFromGit().split('/');\n  if (parts.length === 1) {\n    return sanitizeVersionString(parts[0]);\n  }\n  return sanitizeVersionString(parts[parts.length - 1]);\n};\n\nexport const getFullGitVersion = () => `${getVersionFromTag()}-${getBuildNumberFromGit()}`;\n\nexport const getFullVersionString = env => `${env}-${getFullGitVersion()}`;\n"]}