{"version":3,"sources":["../../../../src/deployments/panter-meteor-kubernetes/libs/utils.js"],"names":[],"mappings":";;;;;;sBAAyB,QAAQ;;8BAEI,0BAA0B;;iCACnC,6BAA6B;;AAEzD,IAAM,UAAU,GAAG,iBAAiB,CAAC;;AAE9B,IAAM,2BAA2B,GAAG,SAA9B,2BAA2B,CAAI,MAAM,EAAE,WAAW,EAAK;+BACW,MAAM,CAA3E,cAAc;MAAd,cAAc,0CAAG,sBAAsB;wBAA8B,MAAM,CAAlC,OAAO;MAAP,OAAO,mCAAG,aAAa;;AAExE,MAAM,UAAU,GAAG,0CAAqB,WAAW,CAAC,CAAC;AACrD,SAAU,cAAc,SAAI,OAAO,SAAI,UAAU,CAAG;CACrD,CAAC;;;AAEK,IAAM,gCAAgC,GAAG,SAAnC,gCAAgC,CAAI,MAAM,EAAE,WAAW;SAClE,iBAAI,MAAM,EAAE,CAAC,cAAc,EAAE,WAAW,EAAE,YAAY,EAAE,OAAO,CAAC,CAAC;CAAA,CAAC;;;AAE7D,IAAM,sBAAsB,GAAG,SAAzB,sBAAsB,CAAI,MAAM,EAAE,WAAW,EAAE,SAAS,EAAK;AACxE,mBAAI,MAAM,EAAE,CAAC,cAAc,EAAE,WAAW,EAAE,YAAY,EAAE,OAAO,CAAC,EAAE,SAAS,CAAC,CAAC;AAC7E,sCAAY,UAAU,EAAE,MAAM,CAAC,CAAC;CACjC,CAAC","file":"utils.js","sourcesContent":["import { set, get } from 'lodash';\n\nimport { getFullVersionString } from '../../../utils/git_utils';\nimport { writeConfig } from '../../../utils/config_utils';\n\nconst CONFIGFILE = '.catladder.yaml';\n\nexport const generateKubernetesImageName = (config, environment) => {\n  const { dockerEndPoint = 'gcr.io/skynet-164509', appname = 'unknown app' } = config;\n\n  const versionTag = getFullVersionString(environment);\n  return `${dockerEndPoint}/${appname}:${versionTag}`;\n};\n\nexport const getKubernetesImageNameFromConfig = (config, environment) =>\n  get(config, ['environments', environment, 'deployment', 'image']);\n\nexport const writeImageNameToConfig = (config, environment, imageName) => {\n  set(config, ['environments', environment, 'deployment', 'image'], imageName);\n  writeConfig(CONFIGFILE, config);\n};\n"]}