{"version":3,"sources":["../src/pass_utils.js"],"names":[],"mappings":";;;;;;;;sBAAiB,SAAS;;;;sBAEZ,QAAQ;;;;6BACc,eAAe;;AAE5C,IAAM,QAAQ,GAAG,SAAX,QAAQ,CAAI,QAAQ,EAAK;AACpC,MAAI;AACF,WAAO,4CAAsB,QAAQ,EAAI,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,EAAE,QAAQ,EAAE,OAAO,EAAE,CAAC,CAAC;GAC7E,CAAC,OAAO,KAAK,EAAE;AACd,QAAI,KAAK,CAAC,OAAO,CAAC,OAAO,CAAC,8BAA8B,CAAC,KAAK,CAAC,CAAC,EAAE;AAChE,aAAO,IAAI,CAAC;KACb;AACD,UAAM,KAAK,CAAC;GACb;CACF,CAAC;;;AAEK,IAAM,OAAO,GAAG,SAAV,OAAO,CAAG,QAAQ;SAC7B,CAAC,oBAAE,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;CAC/B,CAAC;;;AAEK,IAAM,YAAY,GAAG,SAAf,YAAY,CAAI,QAAQ,EAAkB;MAAhB,MAAM,yDAAG,EAAE;;;AAEhD,qDAA6B,QAAQ,SAAI,MAAM,CAAG,CAAC;AACnD,SAAO,QAAQ,CAAC,QAAQ,CAAC,CAAC;CAC3B,CAAC;;AACK,IAAM,YAAY,GAAG,SAAf,YAAY,CAAG,QAAQ;SAAI,oBAAK,QAAQ,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;CAAA,CAAC;;;AAEnE,IAAM,SAAS,GAAG,SAAZ,SAAS,CAAI,QAAQ,EAAE,KAAK,EAAK;AAC5C,SAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,QAAQ,CAAC,CAAC;AACzC,gDAAwB,QAAQ,UAAO,EAAE,KAAK,EAAL,KAAK,EAAE,KAAK,EAAE,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;CAC1E,CAAC;;;AAEK,IAAM,QAAQ,GAAG,SAAX,QAAQ,CAAI,QAAQ,EAAK;AACpC,gCAAU,MAAM,EAAE,CAAC,MAAM,EAAE,QAAQ,CAAC,EAAE;AACpC,SAAK,EAAE,SAAS;GACjB,CAAC,CAAC;CACJ,CAAC","file":"pass_utils.js","sourcesContent":["import yaml from 'js-yaml';\n\nimport _ from 'lodash';\nimport { execSync, spawnSync } from 'child_process';\n\nexport const readPass = (passPath) => {\n  try {\n    return execSync(`pass show ${passPath}`, { stdio: [0], encoding: 'utf-8' });\n  } catch (error) {\n    if (error.message.indexOf('is not in the password store') !== -1) {\n      return null;\n    }\n    throw error;\n  }\n};\n\nexport const hasPass = passPath => (\n  !_.isEmpty(readPass(passPath))\n);\n\nexport const generatePass = (passPath, length = 32) => {\n  // generate without symbols\n  execSync(`pass generate -n ${passPath} ${length}`);\n  return readPass(passPath);\n};\nexport const readPassYaml = passPath => yaml.safeLoad(readPass(passPath));\n\nexport const writePass = (passPath, input) => {\n  console.log('writing to pass', passPath);\n  execSync(`pass insert ${passPath} -m`, { input, stdio: ['pipe', 1, 2] });\n};\n\nexport const editPass = (passPath) => {\n  spawnSync('pass', ['edit', passPath], {\n    stdio: 'inherit',\n  });\n};\n"]}